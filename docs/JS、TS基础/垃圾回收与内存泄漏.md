## 垃圾回收与内存泄漏

### 说说浏览器的垃圾回收机制

- 可达性

	- 某种方式可访问或者说可用的值

- 引用计数

	- 判断当前引用数是否为0
	- 发现垃圾时能立即回收
	- 无法回收循环引用的对象

- 标记清除

	- 标记所有活动对象
	- 清除没有标记对象
	- 能回收循环引用的对象
	- 内存空间碎片化

		- 容易出现很多空闲内存块且不连续 
		- 分配速度慢

			- 要把碎片化的空间分给执行的变量

	- 算法会间隔执行

- 标记整理

	- 标记阶段和标记清除一样
	- 整理: 活动对象放一边,死对象放一边
	- 清除: 把一边死对象清除
	- 解决空间碎片化
	- 算法会间隔执行

- V8对GC的优化

	- 分代式垃圾回收

		- 一些大、老、存活时间长的对象和新、小、存活时间短的对象一个频率的检查不友好
		- 新生代

			- 存活时间较短的对象
			- 分使用区和空闲区
			- 使用区快被写满时垃圾清理
			- 使用区和空闲区角色互换
			- 经过多次复制后的活动对象移到老生代

		- 老生代

			- 存活事件较长或常驻内存的对象
			- 标记整理

### 哪些情况会导致内存泄漏?

- 意外的全局变量
- 遗忘的定时器
- 不当的闭包
- 遗漏的 DOM
- 网络回调
- 监控内存泄漏

	- Performance分析图表
	- Memory

		- 抓取内存快照
		- 定位问题代码
