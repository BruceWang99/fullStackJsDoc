## 网络协议

### HTTP

- 常见的HTTP请求方法

	- GET
	- POST
	- PUT
	- DELETE
	- HEAD

		- 获取报文首部，与GET相比，不返回报文主体部分

	- OPTIONS

		- 询问支持的请求方法，用来跨域请求

	- CONNECT

		- 要求在与代理服务器通信时建立隧道，使用隧道进行TCP通信

	- TRACE

		- 回显服务器收到的请求，主要⽤于测试或诊断

- GET和POST的请求的区别

	- 应用场景

		- GET(幂等)一般用于对服务器资源不会产生影响的场景
		- POST(非幂等)用于对服务器资源会产生影响的情景

	- 缓存

		- 浏览器一般会对 Get 请求缓存，但很少对 Post 请求缓存

	- 报文格式

		- Get 请求的报文中实体部分(body)为空
		- Post 请求的报文中实体部分(body)为向服务器发送的数据

	- 安全性

		- Get 请求可以将请求的参数放入 url 中向服务器发送，这样的做法相对于 Post 请求来说是不太安全的，因为请求的 url 会被保留在历史记录中。

	- 请求长度

		- 浏览器由于对 url 长度的限制，所以会影响 get 请求发送数据时的长度

	- 参数类型

		- post 的参数传递支持更多的数据类型, json, 表单等

- HTTP 1.1 和 HTTP 2.0 的区别

	- 二进制传输

		- HTTP/1.1

			- 报文的头信息必须是文本（ASCII 编码）
			- 数据体可以是文本，也可以是二进制。

		- HTTP/2 

			- 头信息和数据体都是二进制
			- 请求和相应数据分割为更小的帧，用二进制编码
			- HTTP/2 使用了数据流的概念，因为 HTTP/2 的数据包是不按顺序发送的，同一个连接里面连续的数据包，可能属于不同的请求。因此，必须要对数据包做标记，指出它属于哪个请求

	- 多路复用

		- HTTP/2 实现了多路复用
		- 在一个连接里，客户端和服务器都可以同时发送多个请求或回应，而且不用按照顺序一一发送
		- 避免了"队头堵塞"

	- 头部压缩

		- http2头信息使用 gzip 或 compress 压缩后再发送
		- 客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样字段

	- 服务器推送

		- HTTP2 允许服务器未经请求，主动向客户端发送资源
		- 使用服务器推送提前给客户端推送必要的资源(静态资源)，这样就可以相对减少一些延迟时间

- HTTP 1.0 和 HTTP1.1的之间有哪些区别

	- http1.1 新增了很多请求方法，如 PUT、HEAD、OPTIONS 
	- http1.0 默认使用非持久连接，而 http1.1 默认使用持久连接
	- http1.1 则在请求头引入了 range 头域，它允许只请求资源的某个部分
	- http1.1 引入了更多的缓存控制策略，例如 Etag\If-None-Match等
	- http1.1 中新增了 host 字段，用来指定服务器的域名。

- HTTP请求报文是怎么样的

	- 请求行

		- POST /user/login HTTP/1.1
		- 请求方法、请求url 、http协议

	- 请求头

		- User-Agent

			- 浏览器类型

		- Accept

			- 客户端可识别的内容类型

		- Host

			- 主机

		- Referer

			- 发出请求的页面的URL

		- If-None-Match
		- Etag
		- Last-modified-Since
		- Accept-Encoding

			- Accept-Encoding: gzip
			- 浏览器能处理的压缩编码, 可以做性能优化

		- Cookie

	- 空行
	- 请求体

		- post put等请求携带的数据

- HTTP响应报文是怎么样的

	- 响应行

		-  HTTP/1.1 200 OK 
		- 协议版本、状态码、状态码短语

	- 响应头

		- Content-Type

			- 内容类型
			- application/x-www-form-urlencoded

				- 浏览器原生form

			- multipart/form-data

				- 常见的 POST 提交方式, 表单上传文件时使用该种方式

			- application/json

				- 序列化后的 JSON 字符串

			- text/xml

				- 提交 XML 格式的数据

		- Etag
		- Last-Modifined
		- catch-control/expires
		- withCredentials
		- Access-Control-Allow-Credential
		- Access-Control-Allow-Origin

	- 空行
	- 响应体

		- 服务器响应的数据

- 常见的http状态码

	- 1**

		- 信息类状态码, 请求正在处理

	- 2**

		- 成功状态码, 请求正常处理完毕

	- 3**

		- 重定向状态码, 需要附加操作完成请求
		- 301

			- 永久重定向

		- 302

			- 临时重定向

		- 304

			- 请求对应的资源存在着另一个 URI，应该定向获取请求的资源
			- 协商缓存

	- 4**

		- 客户端错误状态码, 服务器无法处理
		- 400

			- 请求中语法报错

		- 401

			- 用户认证失败
			- 登录信息

		- 403

			- 访问被服务器拒绝
			- 跨域

	- 5**

		- 服务器错误状态码,服务器请求出错
		- 500

			- 服务器执行请求时出错

		- 502

			- 代理服务器，从上游服务器中接收到的响应是无效的

		- 503

			- 务器暂时处于超负载或正在进行停机维护, 无法处理请求

- 对keep-alive的理解

	- 使客户端到服务器端的连接持续有效 (http1.1默认keep-alive)

		- 默认是在每次请求/应答，客户端和服务器都要新建一个连接，完成之后立即断开连接

	- 建立过程

		- 客户端发送请求首部添加发送Connection字段
		- 服务器收到请求并处理 Connection字段
		- 服务器回送Connection:Keep-Alive字段给客户端
		- 客户端接收到Connection字段

	- 优点

		- 较少的CPU和内存的使⽤
		- 降低拥塞控制 （TCP连接减少了）
		- 减少了后续请求的延迟（⽆需再进⾏握⼿)

	- 缺点

		- 长时间的Tcp连接容易导致系统资源无效占用，浪费系统资源

- URL有哪些组成部分

	- 协议
	- 域名
	- 端口
	- 虚拟目录
	- 文件名部分

		- 从域名后的最后一个“/”开始到“？”为止

	- 锚部分

		- 从“#”开始到最后

	- 参数部分

- HTTP状态码304是多好还是少好

	- 客户端有缓存情况, 页面内容没有更新
	- 加载速度更快
	- 过多的话,会影响网站收录和权重

- OPTIONS请求方法及使用场景

	- 在采取具体资源请求之前，决定对该资源采取何种必要措施(CORS)
	- 场景

		- 获取服务器支持的所有HTTP请求方法
		- 用来检查访问权限

			- 例如：在进行 CORS 跨域资源共享时，对于复杂请求，就是使用 OPTIONS 方法发送嗅探请求，以判断是否有对指定资源的访问权限。

- HTTP协议的优点和缺点

	- 优点

		- 简单快速
		- 无连接

			- 限制每次连接只处理一个请求

		- 无状态
		- 灵活

	- 缺点

		- 明文传输
		- 不安全

			- 使用明文
			- 不验证通信方的身份

				- 遭遇伪装

			- 无法证明报文的完整性

				- 有可能已遭篡改

- 说说http3

	- 基于UDP协议的QUIC协议
	- 建立连接更高效
	- 多路复用
	- 加密认证报文
	- 向前纠错机制

- 为什么要三次握手? 两次为什么不行?

	- 保证建立一个可靠的连接
	- 假设只有两次, 客户端说我要连接, 服务端说我同意连接, 只确认了客户端连接正常, 服务端发送的消息客户端可能没有收到

### HTTPS

- 什么是HTTPS协议?

	- 超文本传输安全协议
	- HTTP进行通信
	- SSL/TLS来加密数据包

- TLS/SSL的工作原理

	- TLS/SSL加密主要依赖三类算法

		- 散列函数hash

			- 基于散列函数验证数据的完整性, 防止信息篡改
			- MD5
			- SHA256

		- 对称加密

			- 采用协商的秘钥对数据加密
			- AES-CBC

		- 非对称加密

			- 身份认证和秘钥协商
			- RSA

- HTTPS是如何保证安全的

	- 发送方将对称加密的密钥使⽤⾮对称加密的公钥进⾏加密，然后发送出去
	- 接收⽅使⽤私钥进⾏解密得到对称加密的密钥
	- 双⽅就可以使⽤对称加密来进⾏沟通

- HTTPS的特点

	- 优点

		- 加密传输

			- 防止数据在传输过程中被窃取、修改，确保数据安全性

	- 缺点

		- HTTPS需要做服务器和客户端双方的加密和解密处理

			- 耗费更多服务器资源，过程复杂

		- HTTPS协议握手阶段比较费时
		- SSL证书是收费的
		- SSL证书需要绑定IP，不能再同一个IP上绑定多个域名

- HTTPS 用的对称加密还是非对称加密

	- 内容传输的加密上使用的是对称加密
	- 非对称加密只作用在证书验证阶段

### WebSocket

- 对websocket的理解 

	- HTML5提供的一种浏览器与服务器进行全双工通讯的网络技术
	- 基于TCP,并复用TCP握手通道
	- 浏览器和服务器只需要完成握手，就能创建持久性的连接, 双向数据传输
	- WebSocket原理

		- 客户端向 WebSocket 服务器通知（notify）一个带有所有接收者ID（recipients IDs）的事件（event）
		- 服务器接收后立即通知所有活跃的（active）客户端，只有ID在接收者ID序列中的客户端才会处理这个事件。

	- 使用方法

		- new WebSocket('ws://localhost:9999')
		- ws.onopen

			- 监听建立连接后

		- ws.onmessage

			- 监听服务端给客户端发来消息

		- ws.onclose

			- 监听连接关闭

- 短轮询、长轮询、SSE和websocket间的区别

	- 短轮询

		- 浏览器每隔一段时间向服务器发送 http 请求

	- 长轮询

		- 客户端向服务器发起请求
		- 服务器端不直接响应，把请求挂起
		- 有更新，则进行响应, 否则到达一定的时间限制才返回

	- SSE

		- 服务器使用流信息向服务器推送信息
		- 发送的不是一次性的数据包，而是一个数据流，会连续不断地发送过来

	- WebSocket

		- 允许由服务器主动的向客户端推送信息

### TCP和UDP

- TCP和UDP的区别

	- UDP

		- 面向无连接

			- 不需要和 TCP一样在发送数据前进行三次握手建立连接

		- 有单播，多播，广播的功能
		- 不可靠性

			- 通信都不建立连接，想发就发

		- 头部开销小，传输数据高效
		- 面向报文

			- 添加首部后就向下交付IP层
			- 个个报文独立地传输

	- TCP

		- 面向连接
		- 仅支持单播传输
		- 可靠传输
		- 提供拥塞控制
		- 提供全双工通信

			- TCP允许通信双方的应用程序发送数据

		- 面向字节流

			- 以字节流方式进行传输

- TCP和UDP的使用场景

	- TCP 

		- 效率要求相对低，但对准确性要求相对高的场景
		- 文件传输
		- 接受邮件
		- 远程登录

	- UDP

		- 效率要求相对高，对准确性要求相对低的场景
		- 实时聊天
		- 在线视频
		- 网络语音电话
		- 群组(广播通信)

### DNS

- DNS协议是什么?

	- 域名系统 (Domain Name System)
	- 将域名解析为IP地址

### 网络模型

- TCP/IP五层协议

	- 应用层 (application layer)

		- 直接为应用进程提供服务
		- HTTP、FTP、DNS等

	- 传输层 (transport layer)

		- 作为为应用层的基础，定义了“端到端（end to end）”之间数据间的传输方式
		- TCP、UDP

	- 网络层 (internet layer)

		- 判断计算机之间是否在同一个子网中。
		- IP协议、路由器

	- 数据链路层 (data link layer)

		- 通过以太网协议，专门给0/1信号进行分组 ，规定不同的组代表的是什么意思，从而让双方计算机都能够进行识别。
		- 交换机、网卡

	- 物理层 (physical Layer)

		- 通过物理手段将设备连接在一起，传输0/1电信号
		- 网线，光纤，无线

*XMind: ZEN - Trial Version*